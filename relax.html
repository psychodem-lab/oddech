<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Podniebny Ogród - Zen Game</title>
    <style>
        body { 
            background: #e0f2f1; /* Bardzo jasny, kojący morski */
            margin: 0; 
            overflow: hidden; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            font-family: 'Segoe UI', sans-serif;
        }
        canvas { 
            background: linear-gradient(to bottom, #81d4fa, #e1f5fe); 
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-radius: 20px;
            margin-top: 20px;
            max-width: 95vw;
            max-height: 60vh;
        }
        .info { color: #546e7a; margin: 15px; text-align: center; }
        .controls { display: flex; gap: 30px; margin-top: 20px; }
        .btn {
            width: 120px; height: 70px;
            background: white; border: none;
            border-radius: 35px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            font-size: 24px; cursor: pointer; color: #81d4fa;
            display: flex; justify-content: center; align-items: center;
            touch-action: manipulation;
        }
        .btn:active { transform: scale(0.95); background: #f1f8e9; }
    </style>
</head>
<body>

<div class="info">
    <h2 style="margin:0">Podniebny Ogród</h2>
    <p>Przesuwaj chmurę, aby podlewać nasiona. Pozwól im rosnąć w ich własnym tempie.</p>
</div>

<canvas id="zenCanvas" width="800" height="500"></canvas>

<div class="controls">
    <button class="btn" id="left">◀</button>
    <button class="btn" id="right">▶</button>
</div>

<script>
    const canvas = document.getElementById("zenCanvas");
    const ctx = canvas.getContext("2d");

    // Gracz - Chmura
    let cloudX = canvas.width / 2;
    const cloudY = 80;
    const cloudWidth = 100;
    let rightPressed = false;
    let leftPressed = false;

    // Rośliny
    let plants = [];
    const maxPlants = 6;

    // Inicjalizacja nasion
    for(let i=0; i < maxPlants; i++) {
        plants.push({
            x: 100 + i * 120,
            height: 0,
            targetHeight: Math.random() * 200 + 50,
            growth: 0,
            color: `hsl(${120 + Math.random() * 40}, 40%, 60%)`, // Odcienie zieleni
            bloomed: false
        });
    }

    // Sterowanie
    document.getElementById('left').onmousedown = () => leftPressed = true;
    document.getElementById('left').onmouseup = () => leftPressed = false;
    document.getElementById('right').onmousedown = () => rightPressed = true;
    document.getElementById('right').onmouseup = () => rightPressed = false;
    document.getElementById('left').ontouchstart = (e) => { e.preventDefault(); leftPressed = true; };
    document.getElementById('left').ontouchend = () => leftPressed = false;
    document.getElementById('right').ontouchstart = (e) => { e.preventDefault(); rightPressed = true; };
    document.getElementById('right').ontouchend = () => rightPressed = false;

    function drawCloud(x, y) {
        ctx.beginPath();
        ctx.fillStyle = "rgba(255, 255, 255, 0.9)";
        ctx.arc(x, y, 30, 0, Math.PI * 2);
        ctx.arc(x + 35, y, 40, 0, Math.PI * 2);
        ctx.arc(x + 70, y, 30, 0, Math.PI * 2);
        ctx.fill();
        
        // Krople deszczu
        ctx.fillStyle = "rgba(129, 212, 250, 0.4)";
        for(let i=0; i<5; i++) {
            ctx.fillRect(x + i*18, y + 50 + (Date.now()/10 % 20), 2, 10);
        }
    }

    function drawPlant(plant) {
        // Łodyga
        ctx.beginPath();
        ctx.lineWidth = 6;
        ctx.strokeStyle = plant.color;
        ctx.moveTo(plant.x, canvas.height);
        ctx.quadraticCurveTo(plant.x + Math.sin(Date.now()/1000) * 10, canvas.height - plant.growth/2, plant.x, canvas.height - plant.growth);
        ctx.stroke();

        // Liście
        if(plant.growth > 20) {
            ctx.fillStyle = plant.color;
            ctx.beginPath();
            ctx.ellipse(plant.x - 10, canvas.height - plant.growth + 10, 10, 5, Math.PI/4, 0, Math.PI*2);
            ctx.fill();
        }

        // Kwiat
        if(plant.growth >= plant.targetHeight - 5) {
            ctx.beginPath();
            ctx.fillStyle = "#ff80ab"; // Delikatny róż
            for(let i=0; i<5; i++) {
                ctx.ellipse(plant.x, canvas.height - plant.growth - 5, 8, 15, (i * 72) * Math.PI/180, 0, Math.PI*2);
                ctx.fill();
            }
            ctx.beginPath();
            ctx.fillStyle = "#fff176";
            ctx.arc(plant.x, canvas.height - plant.growth - 5, 5, 0, Math.PI*2);
            ctx.fill();
        }
    }

    function update() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Ruch chmury (płynny)
        if(rightPressed && cloudX < canvas.width - 100) cloudX += 4;
        if(leftPressed && cloudX > 0) cloudX -= 4;

        drawCloud(cloudX, cloudY);

        plants.forEach(plant => {
            // Sprawdzanie czy chmura jest nad rośliną
            if(cloudX < plant.x && cloudX + 100 > plant.x) {
                if(plant.growth < plant.targetHeight) {
                    plant.growth += 0.5; // Powolny wzrost
                }
            }
            drawPlant(plant);
        });

        requestAnimationFrame(update);
    }

    update();
</script>

</body>
</html>
